<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-H1EZT1Q9H0"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-H1EZT1Q9H0');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Peruse - A1</title>
    <link rel="icon" type="image/x-icon" href="../Images/Icon_Large_m.png">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="../css/peruse.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
</head>
<body>

    <main class="parent">
        <div class="child">
            <div class="Longread-ArticleA"></div>
        </div>

        <div class="child">
            <div class="Article-Header-ImageA"></div>
        </div>
        <div class="child">
            <header class="header">
                <a href="../html/peruse.html">
                    <img src="../Images/Peruse/PERUSE.png" alt="Peruse Logo" class="logo">
                </a>
                
            </header>
        
            <div class="topnav">
                <div id="myLinks">
                    <a href="#news" id="toggle-visibility"><h3>Unhide</h3></a>
                    <a href="#contact"><h3>Contact</h3></a>
                    <a href="#about"><h3>About</h3></a>
                </div>
            </div>
        </div>
        <div class="child">
            <div class="Longread-Content">
                <div class="metabubbles2">
                    <span class="tag2 culture">cultuur</span>
                    <span class="tag2 feature2">
                        <img src="../Images/Peruse/Map.png" alt="">
                    </span>
                </div>
                <div class="Longread-Title">
                <h2>Vijf sterren is passé: Het Amsterdamse zessterrenhotel</h2>
                <div class="Longread-SubTitle">
                <p>In Amsterdam opent volgende maand het Rosewood Hotel zijn deuren, een zogenoemd zessterrenhotel, dat zich richt op de reiziger die luxe gewend is. Maar wat moeten we ons voorstellen bij zes sterren? Hoe ziet die service eruit? We gingen te rade bij experts in de wereld van de haute hôtellerie.</p>
              </div>
            </div>
                <div class="parent-container">
                  <div class="Longread-meta">
                    <h4>3 min read</h4>
                    <p>Apr 07, 2025</p>
                  </div>
                
                  <div class="SettingsButtons"> 
                    <button id="aa-button" class="rating-button compact">
                      <span id="aa-label"><h4>Aa</h4></span>
                      <input type="range" min="0" max="30" value="10" step="10" class="rating-slider visible form-range" id="aa-slider">
                    </button>
                  </div>
                 </div>
            <br><hr />
            <div class="Main-Longread">
                <div class="Longread-Header"></div>
                <p id="article-text">Even ontnuchteren. Een zessterrenhotel? Dat bestaat niet. Er is geen enkele instantie die die kwalificatie verstrekt. Het CBS telt in Amsterdam 31 vijfsterrenhotels met een zeer compleet aanbod. Maar daaronder zijn een paar hotels die blijkbaar nóg een stapje extra doen voor de gast. Zes sterren, dus hors catégorie.

                  <br><br>
                  Mogelijk kan het Amsterdamse Conservatorium Hotel, uit 2011, zich zo kwalificeren. Het Waldorf Astoria valt er zeker onder. Dat hotel opende in 2014 de deuren en is onderdeel van Hilton Worldwide. </p>
                  

                  <div class="Animation-content-container" id="teleport">
                    <div class="text-content">
                      
                      <p id="article-text">
                        Wat ze gemeen hebben met het nieuwe Rosewood Hotel, dat op 1 mei zijn deuren opent aan de Prinsengracht, is dat hun tweepersoonskamers beginnen bij: 
                      </p>
                    </div>
                        <div class="Number-Animation">
                          <h2>
                            <div id="countup-number" data-target="1000">€0</div>
                          </h2>
                          <h4>per nacht</h4>
                        </div>
                  </div>
                 
                  <p id="article-text"> Maar het Rosewood heeft ook een suite van 141 vierkante meter, die vijftien keer zoveel kost. Die heeft een slaapkamer, een woonkamer en een eetkamer en uitzicht op de toren van de Westerkerk. </p>

                  <div class="room-presentation">
                    <div class="room-image-container">
                        <img src="../Images/Peruse/RoomImage.jpg" alt="View of the Junior Suite">
                    </div>
                    <div class="room-offer-box">
                      <div class="offer-details">
                          <h4>1 x LIBRARY HOUSE</h4>
                          <p class="subtle-text">Privésuite - nog 1 beschikbaar!</p>
                          <h5>Kenmerken:</h5>
                          <ul>
                              <li>141 m²</li>
                              <li>1 Kingsize bed</li>
                          </ul>
                      </div>
                        <div class="offer-actions">
                            <div class="Interactive-RoomPick">
                              <button id="order-button" class="btn btn-primary">Check de prijs</button>
                          </div>
                            
                            <p class="disclaimer">Geen zorgen er zijn geen kosten als je op deze knop drukt!</p>
                        </div>
                      </div>
                  </div>
                  <br>
                    
                  
                    
                    <div class="text-wrap-container">

                      <img src="../Images/Peruse/SoniaCheng.png" 
                           alt="Sonia Cheng or related visual" 
                           class="wrapped-image">

                           <h4>Geen script</h4>
                        
                  <p id="article-text">
                    De Rosewood Hotel Group is een hotelketen met 55 hotels in 24 landen, eigendom van de steenrijke Hongkongse vastgoedfamilie Cheng. <br></p>
                  
                           <p id="article-text">
                            Sonia Cheng, kleindochter van de pater familias, Henry Cheng, leidt het bedrijf. In 2011 nam de familie de van oorsprong Amerikaanse Rosewood-keten over. <br><br>Sindsdien is Sonia Cheng bezig de hotels onder de Rosewood-vlag (de groep heeft ook nog andere merken) in een straf tempo uit te breiden. Op de site van het bedrijf wordt het merk omschreven als ultra-luxury.                   
                          <br><br>
                    Wat betekent dat? Wat omvat die fameuze zessterrenservice? Dat probeert Thomas Harlander, directeur van het Amsterdamse Rosewood, die voorafgaand aan de opening al tweeënhalf jaar op zijn post zit, zo goed mogelijk uit te leggen. ‘Elk luxehotel heeft zijn eigen credo en missie’, zegt Harlander. ‘In het Rosewood geven we iedere gast een tailormade behandeling. Waarom zou je iedereen hetzelfde behandelen? Er is geen script.’<br><br>
                    
                    Een voorbeeld van zo’n persoonlijke benadering kan hij wel geven. ‘De butler heeft ontdekt dat jouw favoriete parfum bijna op is. Kan gebeuren toch? Als je uitcheckt staat er een fris flesje, mooi verpakt. Dan hoef je niet zelf naar de winkel te gaan.’ <br><br>  
                  </p>

                </div>  

                  <h4>Steeds meer luxe hotels in de hoofdstad</h4>
                  <h6>Luxe-/vijfsterrenhotels in Amsterdam</h6>

                  <div class="legend">
                    <div class="legend-item">
                      <span class="legend-dot color-1"></span>
                      <span class="legend-text">Voor 1980</span>
                    </div>
                    <div class="legend-item">
                      <span class="legend-dot color-2"></span>
                      <span class="legend-text">1980-2010</span>
                    </div>
                    <div class="legend-item">
                      <span class="legend-dot color-3"></span>
                      <span class="legend-text">Vanaf 2010</span>
                    </div>
                  </div>

                    <div id="map"></div>
                    
                <br><br>

                  

                <h4>Niet in het reisprogramma</h4>
    
                  <p id="article-text">
                    Het is nog niet zo lang dat Amsterdam meedraait in de wereld van de exclusieve service voor een select gezelschap reizigers. Natuurlijk bezat de hoofdstad altijd al heel fraaie hotels waar de rich and famous neerstreken als ze hier waren uitgenodigd. Denk aan het Amstel Hotel. Maar voor een bepaalde groep welgestelde kosmopolieten zat Amsterdam tot voor kort eenvoudigweg niet in het reisprogramma. <br><br>

                    Harlander: ‘Amsterdam is zeker niet Londen, niet Parijs, niet New York, wat luxury betreft. Het is er wel, maar niet in your face. Dit is een stad om te ontdekken. Elke hoek, elke wijk is anders. Naar mijn mening is het aanbod aan restaurants en bars dramatisch verbeterd de laatste jaren. Is het wereldklasse? Dat is niet aan mij om te beoordelen, maar ik zie veel veranderingen.’ <br><br>

                    Die ziet Roberto Payer ook, een zeer ervaren collega van Harlander, die inmiddels met pensioen is. Payer was directeur van het Hilton Hotel in de stad toen hij kort na de kredietcrisis het idee lanceerde voor een Waldorf Astoria in Amsterdam. ‘Dat merk bestond helemaal niet, ook niet in Amerika. Het was vooral een legende’, zegt hij, doelend op het beroemde Waldorf Astoria-hotel in New York. Payer: ‘Mijn baas dacht dat ik gek geworden was. Ze geloofden niet in luxury in Amsterdam. Amsterdam kende geen luxury. Wel een goed hotel, ja. Maar niet luxury.’  <br><br>
                  </p>

                  <h4>Twee Michelinsterren</h4>
    
                    <p id="article-text">Dat brengt ons bij een belangrijk onderdeel: food and beverage. Het nieuwe Rosewood krijgt een bar met de naam Advocatuur, waar je Indiase snacks kunt krijgen uit de tandoori-oven, voor bij een huisgemaakte gin/jenever met de naam Provo. De op maat gemaakte distilleerinstallatie staat in de bar en is een kunstwerk op zich. <br><br>
    
                      Het hotel herbergt ook een Indiase businessclub, een wens van de overleden burgemeester Eberhard van der Laan, waar het hotel zich aan moest houden. Daarnaast is er restaurant The Court, in de lobbylounge, een ruimte voor evenementen én een hoofdrestaurant, Eeuwen geheten. Als je inhouse dining meetelt (de suites hebben een eetkamer) zijn er vijf plekken in het hotel waar je iets kunt eten of drinken.<br><br> </p>

                      <h4>Carnaval en gala’s</h4>
                        
                     <p id="article-text"> ‘Vijf eetgelegenheden? Dan wens ik ze veel sterkte’, reageert Krooswijk, die nog wel een tip heeft voor het Rosewood. ‘Toen we bij hotel De l’Europe na een ingrijpende verbouwing opengingen, hebben we ervoor gezorgd dat het restaurant binnen een jaar weer twee Michelin-sterren kreeg. Dat is heel belangrijk voor de Amerikaanse markt.’ <br><br>
                        
                      Hoe denkt Thomas Harlander van het Rosewood daarover? ‘Er zijn hotels die hun pink afhakken voor een ster, maar als mijn gasten een Michelin-sterrenervaring willen, stuur ik ze wel door naar mijn vrienden in De l’Europe en het Waldorf’, zegt hij. ‘Het is heel moeilijk met een Michelin-sterrenrestaurant geld te verdienen. In Azië, vooral in Japan, zie je dat chefs geen ster meer willen. Ze hebben ze niet nodig. We zeggen er geen nee tegen, maar een Michelin-ster is niet hetzelfde als succes. Wij gaan onze restaurants vanaf dag één zo opzetten dat ze financieel succesvol zijn.’<br><br>
                        
                       <h4>Armenhuis</h4>
    
                        <p id="article-text">De ingewikkelde en ingrijpende verbouwing van het monumentale pand aan de Prinsengracht vormt een van de redenen waarom de oplevering van het Rosewood zo lang op zich heeft laten wachten. De basis is een 17de-eeuws armenhuis. Tussen 1666 en 1829 woonden hier duizenden vondelingen, wezen en verstoten kinderen.<br><br>
    
                          Daarna werd het gebouw radicaal verbouwd in strengclassicistische stijl. Het moest macht uitstralen. Tot 2013 zat hier het gerechtshof Amsterdam. In 2015 gaf de gemeente groen licht voor de omvorming van het paleis van justitie tot een ‘zeer onderscheidend hotel’, maar door lange bezwaarprocedures kon de renovatie pas in 2020 van start.  <br><br>
                            
                          Studio Piet Boon heeft het hotel een Amsterdams uiterlijk gegeven, onder meer met Amsterdamse kunst. Denk aan foto’s van Herman Brood en Candy Dulfer van de hand van Anton Corbijn, werk van Erwin Olaf en van Streetart Frankey. <br><br>
                            
                          Die laatste is een kunstenaar die gevraagd en ongevraagd beelden toevoegt aan de openbare ruimte in Amsterdam. Boon is een groot fan. ‘Alle hotels van de Rosewood-groep hebben een sense of place’, verklaart Boon. ‘In het Rosewood in het Italiaanse Montalcino voel je: dit is Toscane. Als je binnenkomt op de Prinsengracht, moet je direct weten: dit is Amsterdam. Dat vind ik heel goed gelukt.’<br><br> 
                        
                          Het Rosewood is superhigh-end, maar dat is niet hetzelfde als overdreven luxe, vindt Boon. ‘Het Rosewood wil ook een hotel zijn voor de buurt. Dat je er, als je daar om de hoek woont, lekker in de tuin gaat zitten en een kop koffie gaat drinken.’
                        </p>
            
            </div>

            

            <br><br><br><br>

     

        </div>
        </div>
        
      </main>

      

      <div class="Rating"> 
        <h3>Beoordeling van geloofwaardigheid</h3>
        <p>
          De mate waarin een artikel geloofwaardig is: <br>
          gebaseerd op factoren zoals de deskundigheid van de auteur, de betrouwbaarheid van de bronnen en de nauwkeurigheid van de gepresenteerde informatie.
        </p>
        <label for="slider_input"><p>Op een schaal van (1–100):</p> </label> <br>
        <div class="Range_container">
          <div class="range-slider">
            <div id="slider_thumb" class="range-slider_thumb"></div>
            <div class="range-slider_line">
              <div id="slider_line" class="range-slider_line-fill"></div>
            </div>
            <input id="slider_input" class="range-slider_input" type="range" value="50" min="0" max="100">
          </div>
        </div>
        <div class="container">
          <button id="submitBtn" class="btn inactive">Verstuur</button>
        </div>
      </div>


   

        <footer class="footer">
            <div id="back-to-top" class="footerdiv">
                <div class="scrollwatcher"></div>
                <br>
            </div>
        </footer>
    

        <script type="module">

import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";

// Initialize Supabase client
const supabaseUrl = 'https://rgoydwojepkjbqzdldft.supabase.co';
const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJnb3lkd29qZXBramJxemRsZGZ0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk3MTMyMTYsImV4cCI6MjA1NTI4OTIxNn0.gjk1wM4DUaxAQV9H3zK3hzktav-Pjo40fEIDHR7DTWQ';
const supabaseClient = createClient(supabaseUrl, supabaseKey);

// User ID management functions
function getUserIdFromLocalStorage() {
  return localStorage.getItem("userId");
}
function isUserIdInLocalStorage() {
  return !!getUserIdFromLocalStorage();
}
function generateUUID() {
  return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function (c) {
    const r = (Math.random() * 16) | 0,
          v = c === "x" ? r : (r & 0x3) | 0x8;
    return v.toString(16);
  });
}
function setUserIdInLocalStorage() {
  const newId = generateUUID();
  console.log("Generated UserID:", newId);
  localStorage.setItem("userId", newId);
}
if (!isUserIdInLocalStorage()) {
  setUserIdInLocalStorage();
}

async function insertScriptieVertrouwen(sliderValue, timeSpent) {
  const submitDate = new Date().toISOString();
  
  const { data, error } = await supabaseClient
    .from("scriptie_vertrouwen")
    .insert([{
      slider_values: sliderValue,
      article_number: "A1",  // Force article number to always be "B"
      user_id: getUserIdFromLocalStorage(),
      time_spent: timeSpent,
      submit_date: submitDate
    }]);
    
  if (error) {
    console.error("Error inserting into scriptie_vertrouwen:", error);
  } else {
    console.log("Successfully inserted into scriptie_vertrouwen:", data);
  }
}

// Wait for the DOM to fully load
document.addEventListener("DOMContentLoaded", function () {
  // Record page load time (in milliseconds)
  const pageLoadTime = Date.now();

  // === New Slider Functionality ===
  const slider_input = document.getElementById("slider_input");
  const slider_thumb = document.getElementById("slider_thumb");
  const slider_line = document.getElementById("slider_line");
  const submitBtn = document.getElementById("submitBtn");
  let sliderChanged = false; // Initially, the slider has not been changed

  function showSliderValue() {
    slider_thumb.innerHTML = slider_input.value;
    const bulletPosition = slider_input.value / slider_input.max;
    const space = slider_input.offsetWidth - slider_thumb.offsetWidth;
    slider_thumb.style.left = (bulletPosition * space) + 'px';
    slider_line.style.width = slider_input.value + '%';
  }
  // Call once to set up initial position (without marking as changed)
  showSliderValue();
  window.addEventListener("resize", showSliderValue);
  slider_input.addEventListener('input', () => {
    showSliderValue();
    if (!sliderChanged) {
      sliderChanged = true;
      submitBtn.classList.remove("inactive");
      submitBtn.classList.add("active");
    }
  }, false);

  // === Submit Button, Confirmation, Animation & Redirect ===
  submitBtn.addEventListener("click", async () => {
    if (!sliderChanged) {
      const proceed = confirm("You have not changed the slider value from its default. Do you want to submit this number?");
      if (!proceed) {
        return;
      }
    }

    const sliderValue = Number(slider_input.value);
    const timeSpent = Math.floor((Date.now() - pageLoadTime) / 1000);

    console.log("Submit clicked. Slider value:", sliderValue, "Time spent (s):", timeSpent);

    // Store the article read state and score in localStorage
  // Retrieve the correct A article ID
const aOptions = ["A1", "A2", "A3", "A4"];
const selectedAIndex = parseInt(localStorage.getItem("selectedAOption"), 10);
const selectedA = aOptions[selectedAIndex];

// Store the article read state and score in localStorage using the correct key
const articleKey = `article_${selectedA}_read`;
const scoreKey = `article_${selectedA}_score`;

    localStorage.setItem(articleKey, "true");
    localStorage.setItem(scoreKey, sliderValue);

    // Insert data into Supabase with "B" as the article number
    await insertScriptieVertrouwen(sliderValue, timeSpent);

    // Disable the button to prevent duplicate clicks and trigger animation
    submitBtn.disabled = true;
    $(submitBtn).addClass('btn-progress');
    setTimeout(() => {
      $(submitBtn).addClass('btn-fill');
    }, 500);
    setTimeout(() => {
      $(submitBtn).removeClass('btn-fill').addClass('btn-complete');
    }, 4100);

    // Redirect to the main page after submission and animation
    setTimeout(() => {
      window.location.href = "../html/peruse.html";
    }, 4100);
  });

  // === Article Visibility & Toggle ===
  const options = ["A1", "A2", "A3", "A4", "B1", "B2"];
  const storageKey = "selectedAOption";
  let selectedOptionIndex = localStorage.getItem(storageKey);

  if (selectedOptionIndex === null) {
    selectedOptionIndex = Math.floor(Math.random() * options.length);
    localStorage.setItem(storageKey, selectedOptionIndex);
  } else {
    selectedOptionIndex = Number(selectedOptionIndex);
  }

  const selectedOption = options[selectedOptionIndex];
  const selectedElement = document.getElementById(selectedOption);
  if (selectedElement) {
    selectedElement.classList.remove("hidden");
    selectedElement.classList.add("visible");
  } else {
    console.error(`Element with id "${selectedOption}" not found.`);
  }

  const article = document.querySelector(".Longread-ArticleA");
if (article) {
  window.addEventListener("scroll", function () {
    const scrollY = window.scrollY;
    const maxScroll = document.documentElement.scrollHeight - window.innerHeight;
    const fadeStart = maxScroll * 0.3;
    const fadeEnd = maxScroll * 0.5;

    if (scrollY >= fadeStart && scrollY <= fadeEnd) {
      let progress = (scrollY - fadeStart) / (fadeEnd - fadeStart);
      let r = Math.round(69 * (1 - progress));
      let g = Math.round(18 * (1 - progress));
      let b = Math.round(18 * (1 - progress));
      article.style.backgroundColor = `rgb(${r}, ${g}, ${b})`;
    } else if (scrollY > fadeEnd) {
      article.style.backgroundColor = "#000000";
    } else {
      article.style.backgroundColor = "#451212";
    }
  });
} else {
  console.error("Element with class 'Longread-ArticleA' not found.");
}
          
              // === Scroll Watcher Progress Bar ===
              const toggleVisibilityClass = (element, visibleClass) => {
  const isScrollable = document.body.scrollHeight > window.innerHeight;
  const isScrolled = window.scrollY > 0;
  if (isScrollable && isScrolled) {
    element.classList.add(visibleClass);
  } else {
    element.classList.remove(visibleClass);
  }
};

// === Scroll Progress Bar ===
const scrollWatcher = document.querySelector('.scrollwatcher');
if (scrollWatcher) {
  window.addEventListener('scroll', () => {
    const scrollTop = window.scrollY;
    const docHeight = document.documentElement.scrollHeight - window.innerHeight;
    const progress = Math.min(scrollTop / docHeight, 1);
    scrollWatcher.style.transform = `scaleX(${progress})`;
  });
} else {
  console.error("Element with class 'scrollwatcher' not found.");
}

// === Back-to-Top Button ===
const backToTopButton = document.getElementById("back-to-top");
if (backToTopButton) {
  const updateBackToTopVisibility = () => {
    toggleVisibilityClass(backToTopButton, "visible");
  };

  backToTopButton.addEventListener("click", () => {
    window.scrollTo({ top: 0, behavior: "smooth" });
  });

  window.addEventListener("scroll", updateBackToTopVisibility);
  window.addEventListener("resize", updateBackToTopVisibility);
  updateBackToTopVisibility();
} else {
  console.error("Back-to-top element not found.");
}

// === Footer bar or scroll element ===
const footerBar = document.getElementById("footer-bar"); // or .querySelector('.your-class')
if (footerBar) {
  const updateFooterVisibility = () => {
    toggleVisibilityClass(footerBar, "visiblefooter");
  };

  window.addEventListener("scroll", updateFooterVisibility);
  window.addEventListener("resize", updateFooterVisibility);
  updateFooterVisibility();
}
          
              // === Mobile Menu Toggle ===
              const menuToggle = document.getElementById("menu-toggle");
              if (menuToggle) {
                menuToggle.addEventListener("click", function(){
                  const links = document.getElementById("myLinks");
                  if (links) {
                    links.style.display = links.style.display === "block" ? "none" : "block";
                  } else {
                    console.error("Element with id 'myLinks' not found.");
                  }
                });
              }
          
              // === Adjust Widths for .scroll divs ===
              document.querySelectorAll('.scroll div').forEach(div => {
                const contentWidth = Array.from(div.children).reduce((total, child) => total + child.offsetWidth + 20, 0);
                div.style.width = `${contentWidth}px`;
              });
            });

            const slider_input = document.getElementById('slider_input'),
      slider_thumb = document.getElementById('slider_thumb'),
      slider_line = document.getElementById('slider_line');

function showSliderValue() {
  slider_thumb.innerHTML = slider_input.value;
  const bulletPosition = (slider_input.value /slider_input.max),
        space = slider_input.offsetWidth - slider_thumb.offsetWidth;

  slider_thumb.style.left = (bulletPosition * space) + 'px';
  slider_line.style.width = slider_input.value + '%';
}

showSliderValue();
window.addEventListener("resize",showSliderValue);
slider_input.addEventListener('input', showSliderValue, false);

document.addEventListener('DOMContentLoaded', function () {

const button = document.getElementById('aa-button');
const label = document.getElementById('aa-label'); // Although not used in logic, keep if needed elsewhere
const slider = document.getElementById('aa-slider');

// Key for storing the slider value in localStorage
const storageKey = 'userFontSizeSliderValue';

// Font size values corresponding to the slider steps
const fontSizes = [14, 18, 22, 28]; // 4 sizes for the 4 steps (0, 10, 20, 30)

// To store whether the button is expanded or not
let expanded = false;

// --- Helper Functions ---

// Function to apply the font size based on the slider value
function applyFontSize(sliderValue) {
    // Ensure sliderValue is treated as a number
    const value = parseInt(sliderValue, 10);
    // Calculate index, ensuring it's within bounds
    const index = Math.min(Math.max(value / 10, 0), fontSizes.length - 1);
    const fontSize = fontSizes[index];

    // Apply this font size to all relevant <p> elements
    // Note: IDs should be unique. If you have multiple paragraphs, consider using a class instead, e.g., '.article-text'
    const articleTextElements = document.querySelectorAll('#article-text');
    articleTextElements.forEach(p => {
        p.style.fontSize = `${fontSize}px`;
    });

    // Ensure the slider visually matches the applied value
    slider.value = value;
}

// Function to save the current slider value to localStorage
function saveSetting() {
    localStorage.setItem(storageKey, slider.value);
}

// Function to load the setting from localStorage and apply it
function loadAndApplySetting() {
    const savedValue = localStorage.getItem(storageKey);
    let initialSliderValue;

    // Check if a value was found in localStorage
    if (savedValue !== null) {
        initialSliderValue = parseInt(savedValue, 10);
        // Basic validation: ensure it's a number within the slider's range and steps
        if (isNaN(initialSliderValue) || initialSliderValue < slider.min || initialSliderValue > slider.max || initialSliderValue % slider.step !== 0) {
            console.warn('Invalid font size value found in localStorage. Using default.');
            initialSliderValue = 10; // Use default (matches HTML value="10")
            localStorage.removeItem(storageKey); // Optional: Remove the invalid value
        }
    } else {
        // No saved value, use the default from the HTML slider element
        initialSliderValue = parseInt(slider.value, 10); // Default is 10 based on your HTML
    }

    // Apply the loaded or default font size
    applyFontSize(initialSliderValue);
}

// --- Event Listeners ---

button.addEventListener('click', function () {
    // Toggle visibility of the slider
    if (!expanded) {
        slider.classList.remove('hidden'); // Assuming you have CSS rules for .hidden
        button.classList.remove('compact'); // Assuming you have CSS rules for .compact
        expanded = true;
    } else {
        slider.classList.add('hidden');
        button.classList.add('compact');
        expanded = false;
    }
    // Ensure initial state of slider visibility matches 'expanded' status if needed
    // e.g., if slider starts hidden:
    // if (!expanded) slider.classList.add('hidden');
});

slider.addEventListener('input', function () {
    // Apply the font size based on the current slider value
    applyFontSize(this.value);
    // Save the new setting to localStorage immediately
    saveSetting();
});

// --- Initialization ---

// Load the saved setting (or default) when the page loads
loadAndApplySetting();

// Initial setup for button/slider visibility (assuming it starts compact and hidden)
if (!expanded) {
    slider.classList.add('hidden');
    button.classList.add('compact');
}

});

document.addEventListener('DOMContentLoaded', () => {
    // --- Element Selection ---
    const numberElement = document.getElementById('countup-number');
    const orderButton = document.getElementById('order-button');

    // Check if elements exist
    if (!numberElement) {
        console.error('Element with ID "countup-number" not found.');
        return;
    }
    if (!orderButton) {
        console.error('Element with ID "order-button" not found.');
        // return; // Or allow script to continue without button features
    }

    // --- Animation State ---
    let currentAnimationFrameId = null;

    // --- Reusable Animation Function (Keep as is) ---
    function animateCounter(element, targetValue, duration) {
        if (currentAnimationFrameId) {
            cancelAnimationFrame(currentAnimationFrameId);
        }
        let startValue = 0;
        let startTime = null;
        const currentText = element.textContent || '';
        const cleanedText = currentText.replace(/€|\s/g, '').replace(/\./g, '').replace(',', '.');
        const parsedValue = parseFloat(cleanedText);
        if (!isNaN(parsedValue)) {
            startValue = parsedValue;
        } else {
            console.warn(`Could not parse number from "${currentText}", starting from 0.`);
        }

        function easeInCubic(t) { return t * t * t; }

        const step = (timestamp) => {
            if (!startTime) startTime = timestamp;
            const elapsedTime = timestamp - startTime;
            let progress = Math.min(elapsedTime / duration, 1);
            const easedProgress = easeInCubic(progress);
            const currentValue = startValue + (targetValue - startValue) * easedProgress;
            element.textContent = `€${Math.ceil(currentValue).toLocaleString('nl-NL', { maximumFractionDigits: 0 })}`;
            if (progress < 1) {
                currentAnimationFrameId = requestAnimationFrame(step);
            } else {
                element.textContent = `€${targetValue.toLocaleString('nl-NL', { maximumFractionDigits: 0 })}`;
                currentAnimationFrameId = null;
                startTime = null;
            }
        };
        currentAnimationFrameId = requestAnimationFrame(step);
    }

    // --- Intersection Observer for Initial Animation (Keep as is) ---
    const observerOptions = {
        root: null,
        rootMargin: "-40% 0px -40% 0px",
        threshold: 0
    };
    const startAnimationCallback = (entries, observer) => {
        entries.forEach(entry => {
             // Using currentAnimationFrameId === null as a simple flag to run once
            if (entry.isIntersecting && currentAnimationFrameId === null && !numberElement.dataset.initialAnimationDone) {
                 const initialTarget = parseInt(numberElement.getAttribute('data-target'), 10) || 1000;
                 const initialDuration = 2000;
                 animateCounter(numberElement, initialTarget, initialDuration);
                 numberElement.dataset.initialAnimationDone = 'true'; // Set flag on number element
                 observer.unobserve(entry.target);
            }
        });
    };
    const observer = new IntersectionObserver(startAnimationCallback, observerOptions);
    if(numberElement){ // Observe only if element exists
        observer.observe(numberElement);
    }


    // --- Button Click Listener (MODIFIED) ---
    if(orderButton) { // Add listener only if button exists
        orderButton.addEventListener('click', () => {
            // Existing values (Note: Target changed in your provided code)
            const newTarget = 15605; // Using the value from your latest code snippet
            const clickDuration = 2500;

            console.log("Order button clicked, scrolling, animating and updating style."); // Updated log

            // ***** ADD THIS SECTION *****
            // --- Scroll to Teleport Target ---
            const teleportTarget = document.getElementById('teleport');
            if (teleportTarget) {
                teleportTarget.scrollIntoView({
                    behavior: 'smooth', // Smooth scroll
                    block: 'start'      // Align target's top with viewport's top
                });
            } else {
                console.warn('Element with id="teleport" not found for scrolling.');
            }
            // --- End Scroll ---
            // ***** END OF ADDED SECTION *****


            // 1. Trigger the number animation (Existing)
            animateCounter(numberElement, newTarget, clickDuration);

            // --- Style and State Updates for Button (Existing) ---
            // 2. Change button color class
            orderButton.classList.remove('btn-primary'); // Remove blue
            orderButton.classList.add('btn-success');   // Add green

            // 3. Change button text
            orderButton.textContent = 'Gereserveerd';

            // 4. Disable the button
            orderButton.disabled = true;
            // --- End Style Updates ---
        });
    }

}); 

document.addEventListener('DOMContentLoaded', function() {
    const mapElement = document.getElementById('map');
    if (mapElement) {
        const amsterdamCoords = [52.372, 4.894];
        const initialZoom = 13;
        const map = L.map('map').setView(amsterdamCoords, initialZoom);

        // --- MODIFIED: Use CartoDB Dark Matter Tile Layer (Free) ---
        L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
            // Update attribution for CartoDB and OpenStreetMap
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
            subdomains: 'abcd', // Standard for CartoDB tiles
            maxZoom: 19 // CartoDB's typical max zoom level
        }).addTo(map);
        // --- END MODIFIED ---


        // --- Hotel Data (Keep as before) ---
        const hotelData = [ /* ... Your hotel data array ... */
            { name: "Amstel Hotel", lat: 52.359984, lng: 4.905243, category: "Voor 1980" },
            { name: "Hotel De L'Europe", lat: 52.367644, lng: 4.894466, category: "Voor 1980" },
            { name: "Doelen Hotel", lat: 52.36825, lng: 4.895859, category: "Voor 1980" },
            { name: "Grand Hotel Krasnapolsky", lat: 52.372729, lng: 4.894385, category: "Voor 1980" },
            { name: "Hilton Hotel", lat: 52.35143, lng: 4.872012, category: "Voor 1980" },
            { name: "Pulitzer Amsterdam", lat: 52.372823, lng: 4.883399, category: "Voor 1980" },
            { name: "Hotel Okura Amsterdam", lat: 52.348585, lng: 4.893625, category: "Voor 1980" },
            { name: "Marriott Hotel", lat: 52.362549, lng: 4.880125, category: "Voor 1980" },
            { name: "Renaissance Hotel", lat: 52.378156, lng: 4.894397, category: "Voor 1980" },
            { name: "Garden Hotel", lat: 52.35118, lng: 4.874002, category: "1980-2010" },
            { name: "Barbizon Palace", lat: 52.376486, lng: 4.900472, category: "1980-2010" },
            { name: "The Grand", lat: 52.370945, lng: 4.895604, category: "1980-2010" },
            { name: "Hotel 717", lat: 52.364791, lng: 4.885341, category: "1980-2010" },
            { name: "The Dylan Amsterdam", lat: 52.369279, lng: 4.883983, category: "1980-2010" },
            { name: "The College Hotel", lat: 52.352776, lng: 4.883686, category: "1980-2010" },
            { name: "Grand Hotel Amrâth Amsterdam", lat: 52.374647, lng: 4.903879, category: "1980-2010" },
            { name: "Conservatorium Hotel", lat: 52.358605, lng: 4.878526, category: "Vanaf 2010" },
            { name: "Andaz Amsterdam Prinsengracht", lat: 52.367908, lng: 4.882883, category: "Vanaf 2010" },
            { name: "Waldorf Astoria", lat: 52.364671, lng: 4.89694, category: "Vanaf 2010" },
            { name: "W Amsterdam", lat: 52.3728, lng: 4.889758, category: "Vanaf 2010" },
            { name: "Hotel TwentySeven", lat: 52.37251, lng: 4.893336, category: "Vanaf 2010" },
            { name: "Kimpton De Witt Hotel", lat: 52.377234, lng: 4.895533, category: "Vanaf 2010" },
            { name: "Hyatt Regency Amsterdam Hotel", lat: 52.361778, lng: 4.911721, category: "Vanaf 2010" },
            { name: "Amsterdam Riverside Hotel", lat: 52.353377, lng: 4.907169, category: "Vanaf 2010" },
            { name: "Grand Boutique Hotel Maurits at the Park", lat: 52.362199, lng: 4.91965, category: "Vanaf 2010" },
            { name: "The Diamond Amsterdam", lat: 52.363776, lng: 4.883282, category: "Vanaf 2010" },
            { name: "Rosewood Amsterdam", lat: 52.365751, lng: 4.882848, category: "Vanaf 2010" }
        ];

        // --- Define Colors for Categories (Keep as before) ---
        const categoryColors = { /* ... Your category colors ... */
             "Voor 1980": "#ffbeaa", "1980-2010": "#f05031", "Vanaf 2010": "#dc3545", "default": "#6c757d"
        };
        function getColor(category) { /* ... Your getColor function ... */
             return categoryColors[category] || categoryColors.default;
         }

        // --- Add Markers (Keep lighter border color) ---
        console.log(`Adding ${hotelData.length} hotel markers...`);
        hotelData.forEach(hotel => {
            const lat = parseFloat(hotel.lat);
            const lng = parseFloat(hotel.lng);
            const category = hotel.category;
            // Slightly improved check for valid coordinates and name
            if (hotel.name && typeof lat === 'number' && !isNaN(lat) && typeof lng === 'number' && !isNaN(lng)) {
                const markerOptions = {
                    radius: 7,
                    fillColor: getColor(category),
                    color: "#CCCCCC", // Lighter border color good for dark maps
                    weight: 1,
                    opacity: 1,
                    fillOpacity: 0.85
                };
                const marker = L.circleMarker([lat, lng], markerOptions).addTo(map);
                marker.bindPopup(`<b>${hotel.name}</b><br><i>${category}</i>`);
            } else {
                 // More specific warning for debugging
                 console.warn(`Skipping hotel due to invalid data: Name=${hotel.name}, Lat=${hotel.lat}, Lng=${hotel.lng}`);
            }
        });

        console.log("Leaflet map initialized with CartoDB dark theme and markers."); // Update log message

    } else {
         // More specific error message
         console.error("Map container element with ID 'map' not found in the DOM.");
    }
});


 
    </script>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
</body>
</html>
