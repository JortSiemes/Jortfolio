<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-H1EZT1Q9H0"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-H1EZT1Q9H0');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Peruse - B</title>
    <link rel="icon" type="image/x-icon" href="../Images/Icon_Large_m.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="../css/peruse.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
</head>
<body>

    <main class="parent">
        <div class="child">
            <div class="Longread-ArticleB"></div>
        </div>

        <div class="child">
            <div class="Article-Header-Image"></div>
        </div>
        <div class="child">
            <header class="header">
                <a href="../html/peruse.html">
                    <img src="../Images/Peruse/PERUSE.png" alt="Peruse Logo" class="logo">
                </a>
                <button href="javascript:void(0);" class="icon burger-menu" onclick="myFunction()">☰</button>
            </header>
        
            <div class="topnav">
                <div id="myLinks">
                    <a href="#news" id="toggle-visibility"><h3>Unhide</h3></a>
                    <a href="#contact"><h3>Contact</h3></a>
                    <a href="#about"><h3>About</h3></a>
                </div>
            </div>
        </div>
        <div class="child">
            <div class="Longread-Content">
                <div class="metabubbles2">
                    <span class="tag2 culture">cultuur</span>
                    <span class="tag2 feature2">
                        <img src="../Images/Peruse/Map.png" alt="">
                    </span>
                </div>
                <div class="Longread-Title">
                <h2>Nieuwe hype onder jongeren: Indonesisch energiepoeder</h2>
               
                <p>Poeder dat je energie geeft en dat door je biertje kan: Extra Joss verovert Nederlandse studentenfeestjes. Importeur Thomas Groot ziet de verkoop van het Indonesische energiepoeder jaarlijks met 50% toenemen. Het gebruik lijkt onschuldig, toch schuilen er risico’s, zeggen experts.</p>
                </div>

                <div class="parent-container">
                  <div class="Longread-meta">
                    <h4>3 min read</h4>
                    <p>Apr 02, 2025</p>
                  </div>
                
                  <div class="SettingsButtons"> 
                    <button id="aa-button" class="rating-button compact">
                      <span id="aa-label"><h4>Aa</h4></span>
                      <input type="range" min="0" max="30" value="10" step="10" class="rating-slider hidden form-range" id="aa-slider">
                    </button>
                  </div>
                  <div class="SettingsButtons">
                    <button id="aa-button" class="rating-button compact">
                      <span id="aa-label"><h4>Peruse</h4></span>
                    </button>
                    </button>
                  </div>
                </div>
            <br>

            <hr />
            <div class="Main-Longread">
                <div class="Longread-Header"></div>
                <p id="article-text">‘Het gaat eigenlijk goed door elk drankje. Je gooit het in je glas bier of zelfs in de rode wijn’, zegt de Amsterdamse student Martijn Jaartsveld. ‘Vooral aan het eind van de avond wanneer je een beetje inkakt.’ Maar ook ’s ochtends vroeg ideaal om op een brakke dag toch te kunnen studeren. 'Iedereen in mijn omgeving kent het en gebruikt het eigenlijk. Ook omdat ik het ze aanraad.’ <br><br>

                  Extra Joss-poeder smaakt naar ananas en geeft energie omdat er cafeïne en ginsengextract in zitten. Het gaat om 50 mg cafeïne per zakje, vergelijkbaar met een kopje koffie. Ginseng is een kruid dat ook energieverhogend werkt. Daarnaast bevat het verschillende vitamines B en mierzoete kunstmatige zoetstoffen. <br><br>
                    
                  Met bijnamen als ‘legale cocaïne’ of ‘jos kindersos’ — sos is straattaal voor cocaïne — is Extra Joss populair onder jongeren. Naast de energieboost die je ervan krijgt, zit het succes ervan voornamelijk in het gebruiksgemak en de lage prijs. <br><br>
                    
                  In de webshop van ondernemer Thomas Groot (35) kosten dertig zakjes €14,99 en voor 120 zakjes betaal je €39,99. Hij importeert het poeder sinds 2018 vanuit Indonesië. Daar is Extra Joss sinds kort het officiële energiepoeder van het nationale voetbalteam. ‘Het voordeel is dat er al wat merkbekendheid was, veel studenten kennen het van het backpacken in Zuidoost-Azië.’
                  Groot is de enige officiële importeur van Extra Joss in Nederland. ‘Mijn eerste klanten waren de après-skibars in Val Thorens.’ <br><br>  </p>
                  
             
    
    
    
                    <div class="Longform-Image Image1">
                    </div>
                    <div class="Imagebijschrift">
                      <p>Zakjes Extra Joss in het schap van een supermarkt.</p>
                    </div>

                    <p id="article-text">Inmiddels heeft hij dus die webshop en verkoopt hij in nog fysieke winkels in Nederland, waaronder vijftien supermarkten. Hij zegt vorig jaar een recordaantal van een miljoen zakjes te hebben verkocht. Groot zegt afgelopen jaar een omzet van zo’n €200.000 te hebben gedraaid. Over de winst deelt hij geen cijfers, wel geeft hij aan dat de import een grote kostenpost is. <br><br>
    
                      Ervan leven lukt nog niet, alhoewel hij de afzet elk jaar met zo’n 50% ziet toenemen. Naast zijn bedrijf werkt Groot als e-commercemanager bij Stichd, dochterbedrijf van sportmerk Puma. Dat vindt hij een prima combinatie, want wat hij leert over digitale marketing via Extra Joss, zet hij in voor zijn baan. <br><br> </p>

                      <h4>Carnaval en gala’s</h4>
                        
                     <p id="article-text">   Hoe promoot Groot Extra Joss? ‘In de aanloop naar carnaval heb ik een week lang TikTok-video’s geplaatst in carnavalsthema.’ De omzet lag rond die periode in Brabant zo’n vijf keer hoger dan buiten het carnavalseizoen. Ook Koningsdag, oud en nieuw en studentenfeesten zoals het driedaagse festival Kriminele in Delft zijn belangrijke feestdagen voor zijn handel. <br><br>
                        
                      Voor marketing zet Groot daarnaast in op studentenverenigingen. Hij zegt met bijna alle Nederlandse verenigingen een samenwerking te hebben. ‘Besturen van studentenverenigingen willen het niet van mij kopen om elke associatie met wit poeder te vermijden.’ Daarom geeft hij het gratis en belandt het in 'goodiebags' op studentengala’s. ‘Uiteindelijk bestellen mensen dan zelf online.’ <br><br>
                        
                      Het valt Groot op dat drugs in Nederland tegenwoordig niet echt meer een taboe zijn. ‘Studenten vragen me daarom weleens of je Extra Joss kunt snuiven. Dat is niet de bedoeling, je moet het drinken. Het schijnt onwijs te branden in je neus.’ Dat het wit poeder is waar je een energieboost van krijgt, wekt logischerwijs de associatie met harddrugs. Maar de effecten ervan zijn niet te vergelijken en het is legaal.</p> <br>

                      <h4>‘Niemand naar de kliniek’</h4>
    
                        <p id="article-text">‘Terwijl Red Bull en andere energiedranken minder populair worden, wint dit product terrein, vooral onder mensen die echt hard willen gaan’, ziet Paul Jansen van de Afkickkliniekwijzer. Afkickkliniekwijzer is een van de weinige internetpagina’s die iets over de werking en mogelijke voordelen of gevaren in kaart brengt. <br><br>
    
                          Het middel is relatief onschuldig, zegt Jansen. ‘Maar het gevaar is dat je veel langer door kunt en meer gaat drinken.’ Vooral jongeren, die gevoeliger zijn voor cafeïne en ‘snel over hun grens’ kunnen gaan. Te veel cafeïne kan leiden tot rusteloosheid, slapeloosheid en trillen. Bij een zeer grote hoeveelheid kan het tot cafeïnevergiftiging leiden. Dit komt vaker voor bij energiedrank dan bij koffie. <br><br>
                            
                          Is Extra Joss verslavend? ‘Verslaving is mogelijk’, zegt Jansen, ‘maar vergelijkbaar met cafeïne. Er gaat niemand voor naar de kliniek.’ <br><br>
                            
                          Het advies vanuit het merk Extra Joss is maximaal twee zakjes per dag. Blijft het daar in de praktijk bij? Nee, ‘er zijn soms wel gekken die tien zakjes op een avond drinken’, klinkt het onder studenten. Jaartsveld: ‘Ik denk dat de Nederlandse importeur hier héél goed aan verdient.’ <br><br> </p>
            
            </div>

            <br><br><br><br>

          
        </div>
        </div>

      </main>

      <div class="Rating"> 
        <h3>Beoordeling van geloofwaardigheid</h3>
        <p>
          De mate waarin een artikel geloofwaardig is: <br>
          gebaseerd op factoren zoals de deskundigheid van de auteur, de betrouwbaarheid van de bronnen en de nauwkeurigheid van de gepresenteerde informatie.
        </p>
        <label for="slider_input"><p>Op een schaal van (1–100):</p> </label> <br>
        <div class="Range_container">
          <div class="range-slider">
            <div id="slider_thumb" class="range-slider_thumb"></div>
            <div class="range-slider_line">
              <div id="slider_line" class="range-slider_line-fill"></div>
            </div>
            <input id="slider_input" class="range-slider_input" type="range" value="50" min="0" max="100">
          </div>
        </div>
        <div class="container">
          <button id="submitBtn" class="btn inactive">Verstuur</button>
        </div>
      </div>

   

        <footer class="footer">
            <div id="back-to-top" class="footerdiv">
                <div class="scrollwatcher"></div>
                <br>
            </div>
        </footer>
    

        <script type="module">
           import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";

// Initialize Supabase client
const supabaseUrl = 'https://rgoydwojepkjbqzdldft.supabase.co';
const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJnb3lkd29qZXBramJxemRsZGZ0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk3MTMyMTYsImV4cCI6MjA1NTI4OTIxNn0.gjk1wM4DUaxAQV9H3zK3hzktav-Pjo40fEIDHR7DTWQ';
const supabaseClient = createClient(supabaseUrl, supabaseKey);

// User ID management functions
function getUserIdFromLocalStorage() {
  return localStorage.getItem("userId");
}
function isUserIdInLocalStorage() {
  return !!getUserIdFromLocalStorage();
}
function generateUUID() {
  return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function (c) {
    const r = (Math.random() * 16) | 0,
          v = c === "x" ? r : (r & 0x3) | 0x8;
    return v.toString(16);
  });
}
function setUserIdInLocalStorage() {
  const newId = generateUUID();
  console.log("Generated UserID:", newId);
  localStorage.setItem("userId", newId);
}
if (!isUserIdInLocalStorage()) {
  setUserIdInLocalStorage();
}

// Function to insert data into the "scriptie_vertrouwen" table
async function insertScriptieVertrouwen(sliderValue, timeSpent) {
  // Get the current date and time in ISO format
  const submitDate = new Date().toISOString();
  
  const { data, error } = await supabaseClient
    .from("scriptie_vertrouwen")
    .insert([
      {
        slider_values: sliderValue,
        article_number: "B",
        user_id: getUserIdFromLocalStorage(),
        time_spent: timeSpent,
        submit_date: submitDate  // New field for the submit date
      }
    ]);
    
  if (error) {
    console.error("Error inserting into scriptie_vertrouwen:", error);
  } else {
    console.log("Successfully inserted into scriptie_vertrouwen:", data);
  }
}

// Wait for the DOM to fully load
document.addEventListener("DOMContentLoaded", function () {
  // Record page load time (in milliseconds)
  const pageLoadTime = Date.now();

  // === New Slider Functionality ===
  const slider_input = document.getElementById("slider_input");
  const slider_thumb = document.getElementById("slider_thumb");
  const slider_line = document.getElementById("slider_line");
  const submitBtn = document.getElementById("submitBtn");
  let sliderChanged = false; // Initially, the slider has not been changed

  function showSliderValue() {
    slider_thumb.innerHTML = slider_input.value;
    const bulletPosition = slider_input.value / slider_input.max;
    const space = slider_input.offsetWidth - slider_thumb.offsetWidth;
    slider_thumb.style.left = (bulletPosition * space) + 'px';
    slider_line.style.width = slider_input.value + '%';
  }
  // Call once to set up initial position (without marking as changed)
  showSliderValue();
  window.addEventListener("resize", showSliderValue);
  slider_input.addEventListener('input', () => {
    showSliderValue();
    if (!sliderChanged) {
      sliderChanged = true;
      submitBtn.classList.remove("inactive");
      submitBtn.classList.add("active");
    }
  }, false);

  // === Submit Button, Confirmation, Animation & Redirect ===
  submitBtn.addEventListener("click", async () => {
    if (!sliderChanged) {
      const proceed = confirm("You have not changed the slider value from its default. Do you want to submit this number?");
      if (!proceed) {
        return;
      }
    }

    const sliderValue = Number(slider_input.value);
    const timeSpent = Math.floor((Date.now() - pageLoadTime) / 1000);

    console.log("Submit clicked. Slider value:", sliderValue, "Time spent (s):", timeSpent);

    // Store the article read state and score in localStorage
    const articleKey = `article_B_read`;  // Force this to be "B"
    const scoreKey = `article_B_score`;  // Force this to be "B"

    localStorage.setItem(articleKey, "true");
    localStorage.setItem(scoreKey, sliderValue);

    // Insert data into Supabase with "B" as the article number
    await insertScriptieVertrouwen(sliderValue, timeSpent);

    // Disable the button to prevent duplicate clicks and trigger animation
    submitBtn.disabled = true;
    $(submitBtn).addClass('btn-progress');
    setTimeout(() => {
      $(submitBtn).addClass('btn-fill');
    }, 500);
    setTimeout(() => {
      $(submitBtn).removeClass('btn-fill').addClass('btn-complete');
    }, 4100);

    // Redirect to the main page after submission and animation
    setTimeout(() => {
      window.location.href = "../html/peruse.html";
    }, 4100);
  });

  // === Article Visibility & Toggle ===
  const options = ["A1", "A2", "A3", "A4", "B1", "B2"];
  const storageKey = "selectedAOption";
  let selectedOptionIndex = localStorage.getItem(storageKey);

  if (selectedOptionIndex === null) {
    selectedOptionIndex = Math.floor(Math.random() * options.length);
    localStorage.setItem(storageKey, selectedOptionIndex);
  } else {
    selectedOptionIndex = Number(selectedOptionIndex);
  }

  const selectedOption = options[selectedOptionIndex];
  const selectedElement = document.getElementById(selectedOption);
  if (selectedElement) {
    selectedElement.classList.remove("hidden");
    selectedElement.classList.add("visible");
  } else {
    console.error(`Element with id "${selectedOption}" not found.`);
  }

          
  const article = document.querySelector(".Longread-ArticleB");

if (article) {
  document.addEventListener("scroll", function () {
    const scrollY = window.scrollY;
    const maxScroll = document.documentElement.scrollHeight - window.innerHeight;
    const fadeStart = maxScroll * 0.5;
    const fadeEnd = maxScroll * 0.7;

    // Original RGB values for #573107
    const rStart = 87;
    const gStart = 49;
    const bStart = 7;

    if (scrollY >= fadeStart && scrollY <= fadeEnd) {
      const progress = (scrollY - fadeStart) / (fadeEnd - fadeStart);

      const r = Math.round(rStart * (1 - progress));
      const g = Math.round(gStart * (1 - progress));
      const b = Math.round(bStart * (1 - progress));

      article.style.backgroundColor = `rgb(${r}, ${g}, ${b})`;
    } else if (scrollY > fadeEnd) {
      article.style.backgroundColor = "#000000"; // fully black
    } else {
      article.style.backgroundColor = "#573107"; // your original warm yellowish tone
    }
  });
} else {
  console.error("Element with class 'Longread-ArticleB' not found.");
}

// === Scroll Progress Bar ===
const scrollWatcher = document.querySelector('.scrollwatcher');
if (scrollWatcher) {
  window.addEventListener('scroll', () => {
    const scrollTop = window.scrollY;
    const docHeight = document.documentElement.scrollHeight - window.innerHeight;
    const progress = Math.min(scrollTop / docHeight, 1);
    scrollWatcher.style.transform = `scaleX(${progress})`;
  });
} else {
  console.error("Element with class 'scrollwatcher' not found.");
}

// === Back-to-Top Button ===
const backToTopButton = document.getElementById("back-to-top");
if (backToTopButton) {
  const updateBackToTopVisibility = () => {
    toggleVisibilityClass(backToTopButton, "visible");
  };

  backToTopButton.addEventListener("click", () => {
    window.scrollTo({ top: 0, behavior: "smooth" });
  });

  window.addEventListener("scroll", updateBackToTopVisibility);
  window.addEventListener("resize", updateBackToTopVisibility);
  updateBackToTopVisibility();
} else {
  console.error("Back-to-top element not found.");
}

// === Footer bar or scroll element ===
const footerBar = document.getElementById("footer-bar"); // or .querySelector('.your-class')
if (footerBar) {
  const updateFooterVisibility = () => {
    toggleVisibilityClass(footerBar, "visiblefooter");
  };

  window.addEventListener("scroll", updateFooterVisibility);
  window.addEventListener("resize", updateFooterVisibility);
  updateFooterVisibility();
}
          
              // === Mobile Menu Toggle ===
              const menuToggle = document.getElementById("menu-toggle");
              if (menuToggle) {
                menuToggle.addEventListener("click", function(){
                  const links = document.getElementById("myLinks");
                  if (links) {
                    links.style.display = links.style.display === "block" ? "none" : "block";
                  } else {
                    console.error("Element with id 'myLinks' not found.");
                  }
                });
              }
          
              // === Adjust Widths for .scroll divs ===
              document.querySelectorAll('.scroll div').forEach(div => {
                const contentWidth = Array.from(div.children).reduce((total, child) => total + child.offsetWidth + 20, 0);
                div.style.width = `${contentWidth}px`;
              });
            });

            const slider_input = document.getElementById('slider_input'),
      slider_thumb = document.getElementById('slider_thumb'),
      slider_line = document.getElementById('slider_line');

function showSliderValue() {
  slider_thumb.innerHTML = slider_input.value;
  const bulletPosition = (slider_input.value /slider_input.max),
        space = slider_input.offsetWidth - slider_thumb.offsetWidth;

  slider_thumb.style.left = (bulletPosition * space) + 'px';
  slider_line.style.width = slider_input.value + '%';
}

showSliderValue();
window.addEventListener("resize",showSliderValue);
slider_input.addEventListener('input', showSliderValue, false);

const button = document.getElementById('aa-button');
const label = document.getElementById('aa-label');
const slider = document.getElementById('aa-slider');

// To store whether the button is expanded or not
let expanded = false;

button.addEventListener('click', function () {
  // Toggle visibility of the slider
  if (!expanded) {
    slider.classList.remove('hidden');
    button.classList.remove('compact');
    expanded = true;
  } else {
    slider.classList.add('hidden');
    button.classList.add('compact');
    expanded = false;
  }
});

slider.addEventListener('input', function () {
  // Font size values corresponding to the 4 steps
  const fontSizes = [14, 18, 22, 28]; // 4 sizes for the 4 steps
  
  // Get the current slider value and map it to the appropriate font size
  const fontSize = fontSizes[slider.value / 10]; // slider.value is in multiples of 10

  // Apply this font size to all <p> elements with the ID 'article-text'
  const articleText = document.querySelectorAll('#article-text');
  articleText.forEach(p => {
    p.style.fontSize = `${fontSize}px`;
  });
});


    </script>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
</body>
</html>
